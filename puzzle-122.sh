#!/bin/bash

# Définir les valeurs de départ et de fin en hexadécimal pour chaque sous-plage
RANGES=(
    "2000000000000000000000000000000:22CCCCCCCCCCCCCCCCCCCCCCCCCCCCCC"
    "22CCCCCCCCCCCCCCCCCCCCCCCCCCCCCD:25999999999999999999999999999999"
    "2599999999999999999999999999999A:28666666666666666666666666666665"
    "28666666666666666666666666666666:2B333333333333333333333333333333"
    "2B333333333333333333333333333334:2E000000000000000000000000000000"
    "2E000000000000000000000000000001:30CCCCCCCCCCCCCCCCCCCCCCCCCCCCCC"
    "30CCCCCCCCCCCCCCCCCCCCCCCCCCCCCD:33999999999999999999999999999999"
    "3399999999999999999999999999999A:36666666666666666666666666666665"
    "36666666666666666666666666666666:39333333333333333333333333333333"
    "39333333333333333333333333333334:3C000000000000000000000000000000"
    "3C000000000000000000000000000001:3ECCCCCCCCCCCCCCCCCCCCCCCCCCCCCC"
    "3ECCCCCCCCCCCCCCCCCCCCCCCCCCCCCD:41999999999999999999999999999999"
    "4199999999999999999999999999999A:44666666666666666666666666666665"
    "44666666666666666666666666666666:47333333333333333333333333333333"
    "47333333333333333333333333333334:4A000000000000000000000000000000"
    "4A000000000000000000000000000001:4CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC"
    "4CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCD:4F999999999999999999999999999999"
    "4F99999999999999999999999999999A:52666666666666666666666666666665"
    "52666666666666666666666666666666:55333333333333333333333333333333"
    "55333333333333333333333333333334:3FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"
)

TARGET="1Me3ASYt5JCTAK2XaC32RMeH34PdprrfDx"

# Vérifier les paramètres d'entrée
if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <range_index>"
    exit 1
fi

RANGE_INDEX=$1

# Vérifier que l'index est dans les limites
if [ "$RANGE_INDEX" -lt 0 ] || [ "$RANGE_INDEX" -ge ${#RANGES[@]} ]; then
    echo "Index hors limites. Veuillez choisir un index entre 0 et $((${#RANGES[@]} - 1))."
    exit 1
fi

# Obtenir la sous-plage correspondante
KEYSPACE=${RANGES[$RANGE_INDEX]}

# Afficher les informations de la plage pour vérification
echo "Scanning range $RANGE_INDEX"
echo "Keyspace: $KEYSPACE"

# Lancer clbitcrack avec les paramètres appropriés
OUTPUT_FILE="wip_${RANGE_INDEX}.txt"
./bin/clbitcrack --list-devices
./bin/clbitcrack -c --keyspace "$KEYSPACE" -o "keys.txt" --continue "$OUTPUT_FILE" $TARGET
